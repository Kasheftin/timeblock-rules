webpackJsonp([1],{"59sR":function(e,t){},"9M+g":function(e,t){},Jmt5:function(e,t){},M93x:function(e,t,a){"use strict";var r=a("YK0F"),n=a("VU/8"),s=n(null,r.a,null,null,null);t.a=s.exports},N5qF:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("h3",[e._v("Timeblock Rules Test")]),e._v(" "),a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[e._v("Day Of Week")]),e._v(" "),a("div",{staticClass:"bar"},[a("div",{staticClass:"bar-grid"},e._l(e.total_weeks,function(e){return a("div")})),e._v(" "),a("transition-group",{staticClass:"bar-content",attrs:{name:"slide",mode:"out-in"}},e._l(e.rules,function(t){return a("div",{key:t.id,staticClass:"bar-rule",style:e.getRuleStyle(t)},[a("div",{staticClass:"bar-rule-inner"},[e._v(e._s(t.value))])])})),e._v(" "),a("transition",{attrs:{name:"slide"}},[e.showPreliminary?a("div",{staticClass:"bar-rule -preliminary",style:e.getRuleStyle(e.form)},[a("div",{staticClass:"bar-rule-inner"})]):e._e()])],1)])]),e._v(" "),a("h3",[e._v("Add New Rule")]),e._v(" "),e.error?a("div",{staticClass:"alert alert-danger mb-3"},[e._v(e._s(e.error))]):e._e(),e._v(" "),a("div",{staticClass:"card mb-3"},[a("div",{staticClass:"card-body"},[a("form",{on:{submit:function(t){t.preventDefault(),e.submit(t)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"formStartWeek"}},[e._v("Start Date")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.start_week,expression:"form.start_week"}],staticClass:"form-control",attrs:{type:"number",id:"formStartWeek",min:"0",max:e.total_weeks,readonly:e.loading},domProps:{value:e.form.start_week},on:{input:function(t){t.target.composing||(e.form.start_week=t.target.value)}}}),e._v(" "),a("small",{staticClass:"form-text text-muted"},[e._v("The week of the year only (0 - 50)")])])]),e._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"formEndWeek"}},[e._v("End Date")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.form.end_week,expression:"form.end_week"}],staticClass:"form-control",attrs:{type:"number",id:"formEndWeek",min:"0",max:e.total_weeks,readonly:e.loading},domProps:{value:e.form.end_week},on:{input:function(t){t.target.composing||(e.form.end_week=t.target.value)}}}),e._v(" "),a("small",{staticClass:"form-text text-muted"},[e._v("Leave zero for unlimited length, the week number (0 - 50)")])])]),e._v(" "),a("div",{staticClass:"w-100"}),e._v(" "),a("div",{staticClass:"col"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"formDay"}},[e._v("Day of week")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.form.value,expression:"form.value"}],staticClass:"form-control",attrs:{id:"formDay",readonly:e.loading},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.form.value=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"MON"}},[e._v("MON")]),e._v(" "),a("option",{attrs:{value:"TUE"}},[e._v("TUE")]),e._v(" "),a("option",{attrs:{value:"WED"}},[e._v("WED")]),e._v(" "),a("option",{attrs:{value:"THU"}},[e._v("THU")]),e._v(" "),a("option",{attrs:{value:"FRI"}},[e._v("FRI")])])])])]),e._v(" "),a("div",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",disabled:e.loading}},[e._v("Add")]),e._v(" "),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button",disabled:e.loading},on:{click:e.reset}},[e._v("Reset Form")])])])])]),e._v(" "),a("transition-group",{attrs:{tag:"div",name:"slide-rev"}},e._l(e.notes,function(t,r){return a("div",{key:r,staticClass:"alert alert-info mb-1"},[e._v(e._s(t))])}))],1)},n=[],s={render:r,staticRenderFns:n};t.a=s},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("7+uW"),n=a("M93x"),s=a("YaEn"),o=a("Jmt5"),i=(a.n(o),a("9M+g"));a.n(i);r.a.config.productionTip=!1,new r.a({el:"#app",router:s.a,template:"<App/>",components:{App:n.a}})},NTRc:function(e,t,a){"use strict";var r=a("//Fk"),n=a.n(r),s=a("woOf"),o=a.n(s),i={start_week:0,end_week:void 0,value:"MON"};t.a={data:function(){return{total_weeks:50,rules:[{id:1,start_week:20,end_week:39,value:"FRI"},{id:2,start_week:40,value:"WED"}],autoincrementIndex:0,form:o()({},i),error:void 0,loading:!1,showPreliminary:!0,notes:[]}},methods:{getNextIndex:function(){return 0===this.autoincrementIndex&&(this.autoincrementIndex=this.rules.reduce(function(e,t){return Math.max(e,t.id)},0)),++this.autoincrementIndex},getRuleStyle:function(e){return{left:Math.floor(e.start_week/this.total_weeks*100)+"%",width:Math.floor(((void 0===e.end_week?this.total_weeks-1:e.end_week)-e.start_week+1)/this.total_weeks*100)+"%"}},submit:function(){this.error=void 0;var e=void 0,t=void 0;try{if(e=Math.floor(this.form.start_week),isNaN(e)||e<0||e>this.total_weeks)throw new Error("Start week field is incorrect");if(""!==this.form.end_week&&void 0!==this.form.end_week&&(t=Math.floor(this.form.end_week),isNaN(t)||t<0||t>this.total_weeks))throw new Error("End week field is incorrect");if(void 0!==e&&void 0!==t&&t<e)throw new Error("End week must be greater than the start week");this.processNewRule({start_week:e,end_week:t,value:this.form.value})}catch(e){this.error=e.message}},reset:function(){this.form=o()({},i),this.error=void 0},processNewRule:function(e){var t=this;console.log("ok, here",e),n.a.resolve().then(function(){t.loading=!0,t.notes=[]}).then(function(e){return function(){return new n.a(function(t,a){return setTimeout(t,e||1e3)})}}()).then(function(){var a=[];return t.rules.forEach(function(e){a.push({type:"up",week:e.start_week,id:e.id,value:e.value}),e.end_week&&a.push({type:"down",week:e.end_week,id:e.id,value:e.value})}),a.push({type:"up",week:e.start_week,new:!0,value:e.value}),e.end_week&&a.push({type:"down",week:e.end_week,new:!0,value:e.value}),a.sort(function(e,t){return e.week-t.week}),console.log("events",a),a}).then(function(e){var t=[],a=[],r=void 0;if(e.forEach(function(e){if("up"===e.type)if(e.new){if(r=e,a.length>0){var n=a[a.length-1];n.week<=e.week-1&&t.push({id:n.id,start_week:n.week,value:n.value,end_week:e.week-1})}}else a.push(e);else if(e.new)t.push({new:!0,start_week:r.week,end_week:e.week,value:e.value}),a.length>0&&(a[a.length-1].week=e.week+1),r=void 0;else if(a.length>0){var s=a.pop();!r&&s.week<=e.week&&t.push({id:s.id,start_week:s.week,value:s.value,end_week:e.week})}}),r)t.push({new:!0,start_week:r.week,value:r.value});else if(a.length>0){var n=a.pop();t.push({id:n.id,start_week:n.week,value:n.value})}console.log("Resul: ",t)}).then(function(){t.loading=!1})}}}},YK0F:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement;return(e._self._c||t)("router-view")},n=[],s={render:r,staticRenderFns:n};t.a=s},YaEn:function(e,t,a){"use strict";var r=a("7+uW"),n=a("/ocq"),s=a("pW4T");r.a.use(n.a),t.a=new n.a({mode:"history",routes:[{path:"/",name:"RulesTest",component:s.a}]})},pW4T:function(e,t,a){"use strict";function r(e){a("59sR")}var n=a("NTRc"),s=a("N5qF"),o=a("VU/8"),i=r,l=o(n.a,s.a,i,null,null);t.a=l.exports}},["NHnr"]);
//# sourceMappingURL=app.d5911670d9a95908bb91.js.map