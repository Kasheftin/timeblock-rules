{"version":3,"sources":["webpack:///static/js/app.6740a59d49674d9d6561.js","webpack:///./src/App.vue","webpack:///./src/components/RulesTest.vue?2a63","webpack:///./src/main.js","webpack:///RulesTest.vue","webpack:///./src/App.vue?e139","webpack:///./src/router/index.js","webpack:///./src/components/RulesTest.vue?ee26"],"names":["webpackJsonp","59sR","module","exports","9M+g","Jmt5","M93x","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_lib_template_compiler_index_id_data_v_189d6973_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__","normalizeComponent","Component","N5qF","render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","_l","i","attrs","name","mode","rule","key","id","style","getRuleStyle","_s","value","form","_e","error","on","submit","$event","preventDefault","for","directives","rawName","expression","type","min","max","total_weeks","readonly","loading","domProps","input","target","composing","start_week","end_week","change","$$selectedVal","Array","prototype","filter","call","options","o","selected","map","_value","multiple","disabled","click","reset","tag","note","index","staticRenderFns","esExports","NHnr","Object","defineProperty","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1__App__","__WEBPACK_IMPORTED_MODULE_2__router__","__WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_css__","__WEBPACK_IMPORTED_MODULE_4_bootstrap_vue_dist_bootstrap_vue_css__","n","config","productionTip","el","router","template","components","App","NTRc","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default","formDefaultValues","undefined","data","rules","autoincrementIndex","showPreliminary","notes","methods","getNextIndex","reduce","Math","left","floor","width","startWeek","endWeek","isNaN","Error","processNewRule","e","message","_this","delay","a","resolve","reject","setTimeout","then","events","forEach","r","push","week","new","unlimited","sort","e1","e2","out","levels","newRule","length","event","pop","_e2","console","log","outById","r1","r2","splice","prev","curr","YK0F","YaEn","__WEBPACK_IMPORTED_MODULE_1_vue_router__","__WEBPACK_IMPORTED_MODULE_2__components_RulesTest__","use","routes","path","component","pW4T","injectStyle","ssrContext","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RulesTest_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_71818264_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_RulesTest_vue__","__vue_styles__"],"mappings":"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","file":"static/js/app.6740a59d49674d9d6561.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"59sR\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"9M+g\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"Jmt5\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ \"M93x\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_lib_template_compiler_index_id_data_v_189d6973_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__ = __webpack_require__(\"YK0F\");\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\nvar __vue_script__ = null\n/* template */\n\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __WEBPACK_IMPORTED_MODULE_0__node_modules_vue_loader_lib_template_compiler_index_id_data_v_189d6973_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_App_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ }),\n\n/***/ \"N5qF\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h3',[_vm._v(\"Timeblock Rules Test\")]),_vm._v(\" \"),_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\"Day Of Week\")]),_vm._v(\" \"),_c('div',{staticClass:\"bar\"},[_c('div',{staticClass:\"bar-grid\"},_vm._l((_vm.total_weeks),function(i){return _c('div')})),_vm._v(\" \"),_c('transition-group',{staticClass:\"bar-content\",attrs:{\"name\":\"slide\",\"mode\":\"out-in\"}},_vm._l((_vm.rules),function(rule){return _c('div',{key:rule.id,staticClass:\"bar-rule\",style:(_vm.getRuleStyle(rule))},[_c('div',{staticClass:\"bar-rule-inner\"},[_vm._v(_vm._s(rule.value))])])})),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide\"}},[(_vm.showPreliminary)?_c('div',{staticClass:\"bar-rule -preliminary\",style:(_vm.getRuleStyle(_vm.form))},[_c('div',{staticClass:\"bar-rule-inner\"})]):_vm._e()])],1)])]),_vm._v(\" \"),_c('h3',[_vm._v(\"Add New Rule\")]),_vm._v(\" \"),(_vm.error)?_c('div',{staticClass:\"alert alert-danger mb-3\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.submit($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"formStartWeek\"}},[_vm._v(\"Start Date\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.start_week),expression:\"form.start_week\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"id\":\"formStartWeek\",\"min\":\"0\",\"max\":_vm.total_weeks,\"readonly\":_vm.loading},domProps:{\"value\":(_vm.form.start_week)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.form.start_week=$event.target.value}}}),_vm._v(\" \"),_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\"The week of the year only (0 - 50)\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"formEndWeek\"}},[_vm._v(\"End Date\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.end_week),expression:\"form.end_week\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"id\":\"formEndWeek\",\"min\":\"0\",\"max\":_vm.total_weeks,\"readonly\":_vm.loading},domProps:{\"value\":(_vm.form.end_week)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.form.end_week=$event.target.value}}}),_vm._v(\" \"),_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\"Leave zero for unlimited length, the week number (0 - 50)\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"w-100\"}),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"formDay\"}},[_vm._v(\"Day of week\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.value),expression:\"form.value\"}],staticClass:\"form-control\",attrs:{\"id\":\"formDay\",\"readonly\":_vm.loading},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.form.value=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"MON\"}},[_vm._v(\"MON\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"TUE\"}},[_vm._v(\"TUE\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"WED\"}},[_vm._v(\"WED\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"THU\"}},[_vm._v(\"THU\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"FRI\"}},[_vm._v(\"FRI\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.loading}},[_vm._v(\"Add\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"disabled\":_vm.loading},on:{\"click\":_vm.reset}},[_vm._v(\"Reset Form\")])])])])]),_vm._v(\" \"),_c('transition-group',{attrs:{\"tag\":\"div\",\"name\":\"slide-rev\"}},_vm._l((_vm.notes),function(note,index){return _c('div',{key:index,staticClass:\"alert alert-info mb-1\"},[_vm._v(_vm._s(note))])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"NHnr\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__App__ = __webpack_require__(\"M93x\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__router__ = __webpack_require__(\"YaEn\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_css__ = __webpack_require__(\"Jmt5\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_bootstrap_dist_css_bootstrap_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_bootstrap_vue_dist_bootstrap_vue_css__ = __webpack_require__(\"9M+g\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_bootstrap_vue_dist_bootstrap_vue_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_bootstrap_vue_dist_bootstrap_vue_css__);\n// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\n\n\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].config.productionTip = false;\n\n/* eslint-disable no-new */\nnew __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]({\n  el: '#app',\n  router: __WEBPACK_IMPORTED_MODULE_2__router__[\"a\" /* default */],\n  template: '<App/>',\n  components: { App: __WEBPACK_IMPORTED_MODULE_1__App__[\"a\" /* default */] }\n});\n\n/***/ }),\n\n/***/ \"NTRc\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__ = __webpack_require__(\"fZjL\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__ = __webpack_require__(\"//Fk\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__ = __webpack_require__(\"woOf\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign__);\n\n\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nvar formDefaultValues = {\n  start_week: 0,\n  end_week: undefined,\n  value: 'MON'\n};\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      total_weeks: 50,\n      rules: [{ id: 1, start_week: 20, end_week: 39, value: 'FRI' }, { id: 2, start_week: 40, value: 'WED' }],\n      autoincrementIndex: 0,\n      form: __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default()({}, formDefaultValues),\n      error: undefined,\n      loading: false,\n      showPreliminary: true,\n      notes: []\n    };\n  },\n\n  methods: {\n    getNextIndex: function getNextIndex() {\n      if (this.autoincrementIndex === 0) {\n        this.autoincrementIndex = this.rules.reduce(function (max, rule) {\n          return Math.max(max, rule.id);\n        }, 0);\n      }\n      return ++this.autoincrementIndex;\n    },\n    getRuleStyle: function getRuleStyle(rule) {\n      return {\n        left: Math.floor(rule.start_week / this.total_weeks * 100) + '%',\n        width: Math.floor(((rule.end_week === undefined ? this.total_weeks - 1 : rule.end_week) - rule.start_week + 1) / this.total_weeks * 100) + '%'\n      };\n    },\n    submit: function submit() {\n      this.error = undefined;\n      var startWeek = void 0,\n          endWeek = void 0;\n      try {\n        startWeek = Math.floor(this.form.start_week);\n        if (isNaN(startWeek) || startWeek < 0 || startWeek > this.total_weeks) throw new Error('Start week field is incorrect');\n        if (this.form.end_week !== '' && this.form.end_week !== undefined) {\n          endWeek = Math.floor(this.form.end_week);\n          if (isNaN(endWeek) || endWeek < 0 || endWeek > this.total_weeks) throw new Error('End week field is incorrect');\n        }\n        if (startWeek !== undefined && endWeek !== undefined && endWeek < startWeek) throw new Error('End week must be greater than the start week');\n        this.processNewRule({\n          start_week: startWeek,\n          end_week: endWeek,\n          value: this.form.value\n        });\n      } catch (e) {\n        this.error = e.message;\n      }\n    },\n    reset: function reset() {\n      this.form = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_object_assign___default()({}, formDefaultValues);\n      this.error = undefined;\n    },\n    processNewRule: function processNewRule(rule) {\n      var _this = this;\n\n      var delay = function delay(n) {\n        return function () {\n          return new __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a(function (resolve, reject) {\n            return setTimeout(resolve, n || 1000);\n          });\n        };\n      };\n      __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_promise___default.a.resolve().then(function () {\n        _this.loading = true;\n        _this.notes = [];\n      }).then(delay()).then(function () {\n        var events = [];\n        _this.rules.forEach(function (r) {\n          events.push({\n            type: 'up',\n            week: r.start_week,\n            id: r.id,\n            value: r.value\n          });\n          if (r.end_week) {\n            events.push({\n              type: 'down',\n              week: r.end_week,\n              id: r.id,\n              value: r.value\n            });\n          }\n        });\n        events.push({\n          type: 'up',\n          week: rule.start_week,\n          new: true,\n          value: rule.value,\n          unlimited: !rule.end_week\n        });\n        if (rule.end_week) {\n          events.push({\n            type: 'down',\n            week: rule.end_week,\n            new: true,\n            value: rule.value\n          });\n        }\n        events.sort(function (e1, e2) {\n          return e1.week - e2.week;\n        });\n        return events;\n      }).then(function (events) {\n        var out = [];\n        var levels = [];\n        var newRule = void 0;\n        for (var i = 0; i < events.length; i++) {\n          var event = events[i];\n          if (event.type === 'up') {\n            if (event.new) {\n              newRule = event;\n              if (levels.length > 0) {\n                var e = levels[levels.length - 1];\n                if (e.week <= event.week - 1) {\n                  out.push({\n                    id: e.id,\n                    start_week: e.week,\n                    value: e.value,\n                    end_week: event.week - 1\n                  });\n                }\n              }\n              if (event.unlimited) break;\n            } else {\n              levels.push(event);\n            }\n          } else {\n            if (event.new) {\n              out.push({\n                id: _this.getNextIndex(),\n                start_week: newRule.week,\n                end_week: event.week,\n                value: event.value\n              });\n              if (levels.length > 0) {\n                levels[levels.length - 1].week = event.week + 1;\n                levels[levels.length - 1].id = _this.getNextIndex();\n              }\n              newRule = undefined;\n            } else {\n              if (levels.length > 0) {\n                var _e = levels.pop();\n                if (!newRule && _e.week <= event.week) {\n                  out.push({\n                    id: _e.id,\n                    start_week: _e.week,\n                    value: _e.value,\n                    end_week: event.week\n                  });\n                }\n              }\n            }\n          }\n        }\n        if (newRule) {\n          out.push({\n            id: _this.getNextIndex(),\n            start_week: newRule.week,\n            value: newRule.value\n          });\n        } else if (levels.length > 0) {\n          var _e2 = levels.pop();\n          out.push({\n            id: _e2.id,\n            start_week: _e2.week,\n            value: _e2.value\n          });\n        }\n        return out;\n      }).then(function (out) {\n        console.log('out', out);\n        var outById = {};\n        out.forEach(function (r) {\n          outById[r.id] = r;\n        });\n        for (var i = 0; i < _this.rules.length; i++) {\n          var r1 = _this.rules[i];\n          var r2 = outById[r1.id];\n          if (r2) {\n            if (r1.start_week !== r2.start_week || r1.end_week !== r2.end_week || r1.value !== r2.value) {\n              console.log('Rule #' + r1.id + ' changed');\n              r1.start_week = r2.start_week;\n              r1.end_week = r2.end_week;\n              r1.value = r2.value;\n            } else {\n              console.log('Rule #' + r1.id + ' - no changes');\n            }\n            delete outById[r1.id];\n          } else {\n            console.log('Rule #' + r1.id + ' removed');\n            _this.rules.splice(i, 1);\n            i--;\n          }\n        }\n        __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_object_keys___default()(outById).forEach(function (key) {\n          console.log('New rule #' + key + ' added');\n          _this.rules.push(outById[key]);\n        });\n        _this.notes.push('1. Up/Down process finished');\n      }).then(delay()).then(function () {\n        _this.rules.sort(function (r1, r2) {\n          return r1.start_week - r2.start_week;\n        });\n        for (var i = 1; i < _this.rules.length; i++) {\n          var prev = _this.rules[i - 1];\n          var curr = _this.rules[i];\n          if (prev.end_week === curr.start_week - 1 && prev.value === curr.value) {\n            prev.end_week = curr.end_week;\n            _this.rules.splice(i, 1);\n            i--;\n          }\n        }\n        _this.notes.push('2. Merge consistent rules finished');\n      }).then(function () {\n        _this.loading = false;\n      });\n    }\n    /*\n    processNewRule (rule) {\n      let rule1, rule2\n      const delay = (n) => () => new Promise((resolve, reject) => setTimeout(resolve, n || 1000))\n      Promise.resolve()\n        .then(() => {\n          this.loading = true\n          this.notes = []\n        })\n        .then(delay())\n        .then(() => {\n          let cnt = 0\n          for (let i = 0; i < this.rules.length; i++) {\n            const r = this.rules[i]\n            if (r.type === rule.type && r.start_week >= rule.start_week && (rule.end_week === undefined || (rule.end_week !== undefined && r.end_week !== undefined && r.end_week <= rule.end_week))) {\n              r.highlighted = true\n              cnt++\n            }\n          }\n          this.notes.push('1. Select all rules that are covered by the new rule - ' + cnt + ' rules selected')\n        })\n        .then(delay())\n        .then(() => {\n          let cnt = 0\n          for (let i = this.rules.length - 1; i >= 0; i--) {\n            const r = this.rules[i]\n            if (r.highlighted) {\n              this.rules.splice(i, 1)\n              cnt++\n            }\n          }\n          this.notes.push('2. Delete covered rules - ' + cnt + ' rules deleted')\n        })\n        .then(delay())\n        .then(() => {\n          rule1 = this.rules.find(r => r.type === rule.type && r.start_week <= rule.start_week && (r.end_week === undefined || r.end_week >= rule.start_week))\n          if (rule1) {\n            rule1.highlighted = true\n          }\n          this.notes.push('3. Select the rule1 that covers new rule start_week - ' + (rule1 ? 'found #' + rule1.id + ' [' + rule1.start_week + ',' + rule1.end_week + ']' : 'not found'))\n        })\n        .then(delay())\n        .then(() => {\n          if (rule.end_week === undefined) {\n            rule2 = this.rules.find(r => r.type === rule.type && r.end_week === undefined)\n          } else {\n            rule2 = this.rules.find(r => r.type === rule.type && r.start_week <= rule.end_week && (r.end_week === undefined || r.end_week >= rule.end_week))\n          }\n          if (rule2) {\n            rule2.highlighted = true\n          }\n          this.notes.push('4. Select the rule2 that covers new rule end_week - ' + (rule2 ? 'found #' + rule2.id + ' [' + rule2.start_week + ',' + rule2.end_week + ']' : 'not found'))\n        })\n        .then(delay())\n        .then(() => {\n          let clonedRule1\n          if (rule1 && rule.end_week !== undefined) {\n            if (rule1.end_week === undefined || rule1.end_week > rule.end_week) {\n              clonedRule1 = Object.assign({}, rule1)\n              clonedRule1.id = this.getNextIndex()\n              clonedRule1.start_week = rule.end_week + 1\n              this.rules.push(clonedRule1)\n            }\n          }\n          this.notes.push('5. Check if rule1.end_week is after the rule.end_week and clone it after rule.end_week - ' + (clonedRule1 ? 'cloned #' + clonedRule1.id + ' [' + clonedRule1.start_week + ',' + clonedRule1.end_week + ']' : 'no cloned rule'))\n        })\n        .then(delay())\n        .then(() => {\n          let result = 'rule1 does not exist'\n          if (rule1) {\n            if (rule1.start_week < rule.start_week) {\n              rule1.end_week = rule.start_week - 1\n              result = ' end_week set to ' + rule1.end_week\n            } else if (rule1.start_week === rule.start_week) {\n              const index = this.rules.findIndex(rule => rule.id === rule1.id)\n              if (index === 0 || index > 0) {\n                this.rules.splice(index, 1)\n                result = 'rule1 deleted'\n              }\n            }\n          }\n          this.notes.push('6. Move the end of the rule1 to be before the rule.start_week - ' + result)\n        })\n        .then(delay())\n        .then(() => {\n          let result = 'rule2 does not exist'\n          if (rule2) {\n            result = 'rule2 is equal to rule1, no change'\n            if (!rule1 || rule2 !== rule1) {\n              result = 'no change in rule2'\n              if (rule.end_week !== undefined && rule2.start_week <= rule.end_week) {\n                rule2.start_week = rule.end_week + 1\n                result = 'start_week set to ' + rule2.start_week\n                if (rule2.start_week > rule2.end_week) {\n                  const index = this.rules.findIndex(rule => rule.id === rule2.id)\n                  if (index === 0 || index > 0) {\n                    this.rules.splice(index, 1)\n                    result = 'rule2 deleted'\n                  }\n                }\n              }\n            }\n          }\n          this.notes.push('7. Move the begining of rule2 to be after rule.end_week - ' + result)\n        })\n        .then(delay())\n        .then(() => {\n          rule.id = this.getNextIndex()\n          this.rules.push(rule)\n          this.notes.push('8. Create new rule - #' + rule.id + ' [' + rule.start_week + ',' + rule.end_week + ']')\n        })\n        .then(delay())\n        .then(() => {\n          this.notes.push('9. Merge consistent rules')\n          this.rules.sort((r1, r2) => r1.start_week - r2.start_week)\n          this.types.forEach(type => {\n            const rules = this.rules.filter(rule => rule.type === type.id)\n            for (let i = 1; i < rules.length; i++) {\n              const prev = rules[i - 1]\n              const curr = rules[i]\n              if (prev.end_week === curr.start_week - 1 && this.valuesEqual(prev, curr)) {\n                prev.end_week = curr.end_week\n                const index = this.rules.findIndex(rule => rule.id === curr.id)\n                if (index === 0 || index > 0) {\n                  this.rules.splice(index, 1)\n                  rules.splice(i, 1)\n                  i--\n                }\n              }\n            }\n          })\n        })\n        .then(delay())\n        .then(() => {\n          this.notes.push('10. Complete')\n        })\n        .then(delay())\n        .then(() => {\n          this.rules.forEach(rule => {\n            rule.highlighted = false\n          })\n          this.loading = false\n        })\n    }\n    */\n\n  }\n});\n\n/***/ }),\n\n/***/ \"YK0F\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ \"YaEn\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(\"7+uW\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vue_router__ = __webpack_require__(\"/ocq\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_RulesTest__ = __webpack_require__(\"pW4T\");\n\n\n\n\n__WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */].use(__WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]);\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_1_vue_router__[\"a\" /* default */]({\n  mode: 'history',\n  routes: [{\n    path: '/',\n    name: 'RulesTest',\n    component: __WEBPACK_IMPORTED_MODULE_2__components_RulesTest__[\"a\" /* default */]\n  }]\n}));\n\n/***/ }),\n\n/***/ \"pW4T\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RulesTest_vue__ = __webpack_require__(\"NTRc\");\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_71818264_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_RulesTest_vue__ = __webpack_require__(\"N5qF\");\nfunction injectStyle (ssrContext) {\n  __webpack_require__(\"59sR\")\n}\nvar normalizeComponent = __webpack_require__(\"VU/8\")\n/* script */\n\n/* template */\n\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_lib_selector_type_script_index_0_RulesTest_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_lib_template_compiler_index_id_data_v_71818264_hasScoped_false_transformToRequire_video_src_source_src_img_src_image_xlink_href_node_modules_vue_loader_lib_selector_type_template_index_0_RulesTest_vue__[\"a\" /* default */],\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (Component.exports);\n\n\n/***/ })\n\n},[\"NHnr\"]);\n\n\n// WEBPACK FOOTER //\n// static/js/app.6740a59d49674d9d6561.js","var normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-189d6973\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = M93x\n// module chunks = 1","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('h3',[_vm._v(\"Timeblock Rules Test\")]),_vm._v(\" \"),_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body\"},[_c('h5',{staticClass:\"card-title\"},[_vm._v(\"Day Of Week\")]),_vm._v(\" \"),_c('div',{staticClass:\"bar\"},[_c('div',{staticClass:\"bar-grid\"},_vm._l((_vm.total_weeks),function(i){return _c('div')})),_vm._v(\" \"),_c('transition-group',{staticClass:\"bar-content\",attrs:{\"name\":\"slide\",\"mode\":\"out-in\"}},_vm._l((_vm.rules),function(rule){return _c('div',{key:rule.id,staticClass:\"bar-rule\",style:(_vm.getRuleStyle(rule))},[_c('div',{staticClass:\"bar-rule-inner\"},[_vm._v(_vm._s(rule.value))])])})),_vm._v(\" \"),_c('transition',{attrs:{\"name\":\"slide\"}},[(_vm.showPreliminary)?_c('div',{staticClass:\"bar-rule -preliminary\",style:(_vm.getRuleStyle(_vm.form))},[_c('div',{staticClass:\"bar-rule-inner\"})]):_vm._e()])],1)])]),_vm._v(\" \"),_c('h3',[_vm._v(\"Add New Rule\")]),_vm._v(\" \"),(_vm.error)?_c('div',{staticClass:\"alert alert-danger mb-3\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"card mb-3\"},[_c('div',{staticClass:\"card-body\"},[_c('form',{on:{\"submit\":function($event){$event.preventDefault();_vm.submit($event)}}},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"formStartWeek\"}},[_vm._v(\"Start Date\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.start_week),expression:\"form.start_week\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"id\":\"formStartWeek\",\"min\":\"0\",\"max\":_vm.total_weeks,\"readonly\":_vm.loading},domProps:{\"value\":(_vm.form.start_week)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.form.start_week=$event.target.value}}}),_vm._v(\" \"),_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\"The week of the year only (0 - 50)\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"formEndWeek\"}},[_vm._v(\"End Date\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.end_week),expression:\"form.end_week\"}],staticClass:\"form-control\",attrs:{\"type\":\"number\",\"id\":\"formEndWeek\",\"min\":\"0\",\"max\":_vm.total_weeks,\"readonly\":_vm.loading},domProps:{\"value\":(_vm.form.end_week)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.form.end_week=$event.target.value}}}),_vm._v(\" \"),_c('small',{staticClass:\"form-text text-muted\"},[_vm._v(\"Leave zero for unlimited length, the week number (0 - 50)\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"w-100\"}),_vm._v(\" \"),_c('div',{staticClass:\"col\"},[_c('div',{staticClass:\"form-group\"},[_c('label',{attrs:{\"for\":\"formDay\"}},[_vm._v(\"Day of week\")]),_vm._v(\" \"),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.form.value),expression:\"form.value\"}],staticClass:\"form-control\",attrs:{\"id\":\"formDay\",\"readonly\":_vm.loading},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.form.value=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"MON\"}},[_vm._v(\"MON\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"TUE\"}},[_vm._v(\"TUE\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"WED\"}},[_vm._v(\"WED\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"THU\"}},[_vm._v(\"THU\")]),_vm._v(\" \"),_c('option',{attrs:{\"value\":\"FRI\"}},[_vm._v(\"FRI\")])])])])]),_vm._v(\" \"),_c('div',{staticClass:\"text-center\"},[_c('button',{staticClass:\"btn btn-primary\",attrs:{\"type\":\"submit\",\"disabled\":_vm.loading}},[_vm._v(\"Add\")]),_vm._v(\" \"),_c('button',{staticClass:\"btn btn-secondary\",attrs:{\"type\":\"button\",\"disabled\":_vm.loading},on:{\"click\":_vm.reset}},[_vm._v(\"Reset Form\")])])])])]),_vm._v(\" \"),_c('transition-group',{attrs:{\"tag\":\"div\",\"name\":\"slide-rev\"}},_vm._l((_vm.notes),function(note,index){return _c('div',{key:index,staticClass:\"alert alert-info mb-1\"},[_vm._v(_vm._s(note))])}))],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-71818264\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/RulesTest.vue\n// module id = N5qF\n// module chunks = 1","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport 'bootstrap/dist/css/bootstrap.css'\nimport 'bootstrap-vue/dist/bootstrap-vue.css'\n\nVue.config.productionTip = false\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","<template>\n  <div class=\"container\">\n    <h3>Timeblock Rules Test</h3>\n    <div class=\"card mb-3\">\n      <div class=\"card-body\">\n        <h5 class=\"card-title\">Day Of Week</h5>\n        <div class=\"bar\">\n          <div class=\"bar-grid\">\n            <div v-for=\"i in total_weeks\"></div>\n          </div>\n          <transition-group class=\"bar-content\" name=\"slide\" mode=\"out-in\">\n            <div v-for=\"rule in rules\" class=\"bar-rule\" :style=\"getRuleStyle(rule)\" :key=\"rule.id\">\n              <div class=\"bar-rule-inner\">{{rule.value}}</div>\n            </div>\n          </transition-group>\n          <transition name=\"slide\">\n            <div v-if=\"showPreliminary\" class=\"bar-rule -preliminary\" :style=\"getRuleStyle(form)\">\n              <div class=\"bar-rule-inner\"></div>\n            </div>\n          </transition>\n        </div>\n      </div>\n    </div>\n    <h3>Add New Rule</h3>\n    <div class=\"alert alert-danger mb-3\" v-if=\"error\">{{error}}</div>\n    <div class=\"card mb-3\">\n      <div class=\"card-body\">\n        <form @submit.prevent=\"submit\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <div class=\"form-group\">\n                <label for=\"formStartWeek\">Start Date</label>\n                <input type=\"number\" class=\"form-control\" id=\"formStartWeek\" min=\"0\" :max=\"total_weeks\" v-model=\"form.start_week\" :readonly=\"loading\">\n                <small class=\"form-text text-muted\">The week of the year only (0 - 50)</small>\n              </div>\n            </div>\n            <div class=\"col\">\n              <div class=\"form-group\">\n                <label for=\"formEndWeek\">End Date</label>\n                <input type=\"number\" class=\"form-control\" id=\"formEndWeek\" min=\"0\" :max=\"total_weeks\" v-model=\"form.end_week\" :readonly=\"loading\">\n                <small class=\"form-text text-muted\">Leave zero for unlimited length, the week number (0 - 50)</small>\n              </div>\n            </div>\n            <div class=\"w-100\"></div>\n            <div class=\"col\">\n              <div class=\"form-group\">\n                <label for=\"formDay\">Day of week</label>\n                <select class=\"form-control\" id=\"formDay\" v-model=\"form.value\" :readonly=\"loading\">\n                  <option value=\"MON\">MON</option>\n                  <option value=\"TUE\">TUE</option>\n                  <option value=\"WED\">WED</option>\n                  <option value=\"THU\">THU</option>\n                  <option value=\"FRI\">FRI</option>\n                </select>\n              </div>\n            </div>\n          </div>\n          <div class=\"text-center\">\n            <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">Add</button>\n            <button type=\"button\" class=\"btn btn-secondary\" @click=\"reset\" :disabled=\"loading\">Reset Form</button>\n          </div>\n        </form>\n      </div>\n    </div>\n    <transition-group tag=\"div\" name=\"slide-rev\">\n      <div class=\"alert alert-info mb-1\" v-for=\"(note, index) in notes\" :key=\"index\">{{note}}</div>\n    </transition-group>\n  </div>\n</template>\n\n<script>\n\nconst formDefaultValues = {\n  start_week: 0,\n  end_week: undefined,\n  value: 'MON'\n}\n\nexport default {\n  data () {\n    return {\n      total_weeks: 50,\n      rules: [\n        { id: 1, start_week: 20, end_week: 39, value: 'FRI' },\n        { id: 2, start_week: 40, value: 'WED' }\n      ],\n      autoincrementIndex: 0,\n      form: Object.assign({}, formDefaultValues),\n      error: undefined,\n      loading: false,\n      showPreliminary: true,\n      notes: []\n    }\n  },\n  methods: {\n    getNextIndex () {\n      if (this.autoincrementIndex === 0) {\n        this.autoincrementIndex = this.rules.reduce((max, rule) => Math.max(max, rule.id), 0)\n      }\n      return ++this.autoincrementIndex\n    },\n    getRuleStyle (rule) {\n      return {\n        left: Math.floor(rule.start_week / this.total_weeks * 100) + '%',\n        width: Math.floor(((rule.end_week === undefined ? (this.total_weeks - 1) : rule.end_week) - rule.start_week + 1) / this.total_weeks * 100) + '%'\n      }\n    },\n    submit () {\n      this.error = undefined\n      let startWeek, endWeek\n      try {\n        startWeek = Math.floor(this.form.start_week)\n        if (isNaN(startWeek) || startWeek < 0 || startWeek > this.total_weeks) throw new Error('Start week field is incorrect')\n        if (this.form.end_week !== '' && this.form.end_week !== undefined) {\n          endWeek = Math.floor(this.form.end_week)\n          if (isNaN(endWeek) || endWeek < 0 || endWeek > this.total_weeks) throw new Error('End week field is incorrect')\n        }\n        if (startWeek !== undefined && endWeek !== undefined && endWeek < startWeek) throw new Error('End week must be greater than the start week')\n        this.processNewRule({\n          start_week: startWeek,\n          end_week: endWeek,\n          value: this.form.value\n        })\n      } catch (e) {\n        this.error = e.message\n      }\n    },\n    reset () {\n      this.form = Object.assign({}, formDefaultValues)\n      this.error = undefined\n    },\n    processNewRule (rule) {\n      const delay = (n) => () => new Promise((resolve, reject) => setTimeout(resolve, n || 1000))\n      Promise.resolve()\n        .then(() => {\n          this.loading = true\n          this.notes = []\n        })\n        .then(delay())\n        .then(() => {\n          const events = []\n          this.rules.forEach(r => {\n            events.push({\n              type: 'up',\n              week: r.start_week,\n              id: r.id,\n              value: r.value\n            })\n            if (r.end_week) {\n              events.push({\n                type: 'down',\n                week: r.end_week,\n                id: r.id,\n                value: r.value\n              })\n            }\n          })\n          events.push({\n            type: 'up',\n            week: rule.start_week,\n            new: true,\n            value: rule.value,\n            unlimited: !rule.end_week\n          })\n          if (rule.end_week) {\n            events.push({\n              type: 'down',\n              week: rule.end_week,\n              new: true,\n              value: rule.value\n            })\n          }\n          events.sort((e1, e2) => e1.week - e2.week)\n          return events\n        })\n        .then(events => {\n          const out = []\n          const levels = []\n          let newRule\n          for (let i = 0; i < events.length; i++) {\n            const event = events[i]\n            if (event.type === 'up') {\n              if (event.new) {\n                newRule = event\n                if (levels.length > 0) {\n                  const e = levels[levels.length - 1]\n                  if (e.week <= event.week - 1) {\n                    out.push({\n                      id: e.id,\n                      start_week: e.week,\n                      value: e.value,\n                      end_week: event.week - 1\n                    })\n                  }\n                }\n                if (event.unlimited) break\n              } else {\n                levels.push(event)\n              }\n            } else {\n              if (event.new) {\n                out.push({\n                  id: this.getNextIndex(),\n                  start_week: newRule.week,\n                  end_week: event.week,\n                  value: event.value\n                })\n                if (levels.length > 0) {\n                  levels[levels.length - 1].week = event.week + 1\n                  levels[levels.length - 1].id = this.getNextIndex()\n                }\n                newRule = undefined\n              } else {\n                if (levels.length > 0) {\n                  const e = levels.pop()\n                  if (!newRule && e.week <= event.week) {\n                    out.push({\n                      id: e.id,\n                      start_week: e.week,\n                      value: e.value,\n                      end_week: event.week\n                    })\n                  }\n                }\n              }\n            }\n          }\n          if (newRule) {\n            out.push({\n              id: this.getNextIndex(),\n              start_week: newRule.week,\n              value: newRule.value\n            })\n          } else if (levels.length > 0) {\n            const e = levels.pop()\n            out.push({\n              id: e.id,\n              start_week: e.week,\n              value: e.value\n            })\n          }\n          return out\n        })\n        .then(out => {\n          console.log('out', out)\n          const outById = {}\n          out.forEach(r => {\n            outById[r.id] = r\n          })\n          for (let i = 0; i < this.rules.length; i++) {\n            const r1 = this.rules[i]\n            const r2 = outById[r1.id]\n            if (r2) {\n              if (r1.start_week !== r2.start_week || r1.end_week !== r2.end_week || r1.value !== r2.value) {\n                console.log('Rule #' + r1.id + ' changed')\n                r1.start_week = r2.start_week\n                r1.end_week = r2.end_week\n                r1.value = r2.value\n              } else {\n                console.log('Rule #' + r1.id + ' - no changes')\n              }\n              delete outById[r1.id]\n            } else {\n              console.log('Rule #' + r1.id + ' removed')\n              this.rules.splice(i, 1)\n              i--\n            }\n          }\n          Object.keys(outById).forEach(key => {\n            console.log('New rule #' + key + ' added')\n            this.rules.push(outById[key])\n          })\n          this.notes.push('1. Up/Down process finished')\n        })\n        .then(delay())\n        .then(() => {\n          this.rules.sort((r1, r2) => r1.start_week - r2.start_week)\n          for (let i = 1; i < this.rules.length; i++) {\n            const prev = this.rules[i - 1]\n            const curr = this.rules[i]\n            if (prev.end_week === curr.start_week - 1 && prev.value === curr.value) {\n              prev.end_week = curr.end_week\n              this.rules.splice(i, 1)\n              i--\n            }\n          }\n          this.notes.push('2. Merge consistent rules finished')\n        })\n        .then(() => {\n          this.loading = false\n        })\n    }\n    /*\n    processNewRule (rule) {\n      let rule1, rule2\n      const delay = (n) => () => new Promise((resolve, reject) => setTimeout(resolve, n || 1000))\n      Promise.resolve()\n        .then(() => {\n          this.loading = true\n          this.notes = []\n        })\n        .then(delay())\n        .then(() => {\n          let cnt = 0\n          for (let i = 0; i < this.rules.length; i++) {\n            const r = this.rules[i]\n            if (r.type === rule.type && r.start_week >= rule.start_week && (rule.end_week === undefined || (rule.end_week !== undefined && r.end_week !== undefined && r.end_week <= rule.end_week))) {\n              r.highlighted = true\n              cnt++\n            }\n          }\n          this.notes.push('1. Select all rules that are covered by the new rule - ' + cnt + ' rules selected')\n        })\n        .then(delay())\n        .then(() => {\n          let cnt = 0\n          for (let i = this.rules.length - 1; i >= 0; i--) {\n            const r = this.rules[i]\n            if (r.highlighted) {\n              this.rules.splice(i, 1)\n              cnt++\n            }\n          }\n          this.notes.push('2. Delete covered rules - ' + cnt + ' rules deleted')\n        })\n        .then(delay())\n        .then(() => {\n          rule1 = this.rules.find(r => r.type === rule.type && r.start_week <= rule.start_week && (r.end_week === undefined || r.end_week >= rule.start_week))\n          if (rule1) {\n            rule1.highlighted = true\n          }\n          this.notes.push('3. Select the rule1 that covers new rule start_week - ' + (rule1 ? 'found #' + rule1.id + ' [' + rule1.start_week + ',' + rule1.end_week + ']' : 'not found'))\n        })\n        .then(delay())\n        .then(() => {\n          if (rule.end_week === undefined) {\n            rule2 = this.rules.find(r => r.type === rule.type && r.end_week === undefined)\n          } else {\n            rule2 = this.rules.find(r => r.type === rule.type && r.start_week <= rule.end_week && (r.end_week === undefined || r.end_week >= rule.end_week))\n          }\n          if (rule2) {\n            rule2.highlighted = true\n          }\n          this.notes.push('4. Select the rule2 that covers new rule end_week - ' + (rule2 ? 'found #' + rule2.id + ' [' + rule2.start_week + ',' + rule2.end_week + ']' : 'not found'))\n        })\n        .then(delay())\n        .then(() => {\n          let clonedRule1\n          if (rule1 && rule.end_week !== undefined) {\n            if (rule1.end_week === undefined || rule1.end_week > rule.end_week) {\n              clonedRule1 = Object.assign({}, rule1)\n              clonedRule1.id = this.getNextIndex()\n              clonedRule1.start_week = rule.end_week + 1\n              this.rules.push(clonedRule1)\n            }\n          }\n          this.notes.push('5. Check if rule1.end_week is after the rule.end_week and clone it after rule.end_week - ' + (clonedRule1 ? 'cloned #' + clonedRule1.id + ' [' + clonedRule1.start_week + ',' + clonedRule1.end_week + ']' : 'no cloned rule'))\n        })\n        .then(delay())\n        .then(() => {\n          let result = 'rule1 does not exist'\n          if (rule1) {\n            if (rule1.start_week < rule.start_week) {\n              rule1.end_week = rule.start_week - 1\n              result = ' end_week set to ' + rule1.end_week\n            } else if (rule1.start_week === rule.start_week) {\n              const index = this.rules.findIndex(rule => rule.id === rule1.id)\n              if (index === 0 || index > 0) {\n                this.rules.splice(index, 1)\n                result = 'rule1 deleted'\n              }\n            }\n          }\n          this.notes.push('6. Move the end of the rule1 to be before the rule.start_week - ' + result)\n        })\n        .then(delay())\n        .then(() => {\n          let result = 'rule2 does not exist'\n          if (rule2) {\n            result = 'rule2 is equal to rule1, no change'\n            if (!rule1 || rule2 !== rule1) {\n              result = 'no change in rule2'\n              if (rule.end_week !== undefined && rule2.start_week <= rule.end_week) {\n                rule2.start_week = rule.end_week + 1\n                result = 'start_week set to ' + rule2.start_week\n                if (rule2.start_week > rule2.end_week) {\n                  const index = this.rules.findIndex(rule => rule.id === rule2.id)\n                  if (index === 0 || index > 0) {\n                    this.rules.splice(index, 1)\n                    result = 'rule2 deleted'\n                  }\n                }\n              }\n            }\n          }\n          this.notes.push('7. Move the begining of rule2 to be after rule.end_week - ' + result)\n        })\n        .then(delay())\n        .then(() => {\n          rule.id = this.getNextIndex()\n          this.rules.push(rule)\n          this.notes.push('8. Create new rule - #' + rule.id + ' [' + rule.start_week + ',' + rule.end_week + ']')\n        })\n        .then(delay())\n        .then(() => {\n          this.notes.push('9. Merge consistent rules')\n          this.rules.sort((r1, r2) => r1.start_week - r2.start_week)\n          this.types.forEach(type => {\n            const rules = this.rules.filter(rule => rule.type === type.id)\n            for (let i = 1; i < rules.length; i++) {\n              const prev = rules[i - 1]\n              const curr = rules[i]\n              if (prev.end_week === curr.start_week - 1 && this.valuesEqual(prev, curr)) {\n                prev.end_week = curr.end_week\n                const index = this.rules.findIndex(rule => rule.id === curr.id)\n                if (index === 0 || index > 0) {\n                  this.rules.splice(index, 1)\n                  rules.splice(i, 1)\n                  i--\n                }\n              }\n            }\n          })\n        })\n        .then(delay())\n        .then(() => {\n          this.notes.push('10. Complete')\n        })\n        .then(delay())\n        .then(() => {\n          this.rules.forEach(rule => {\n            rule.highlighted = false\n          })\n          this.loading = false\n        })\n    }\n    */\n  }\n}\n</script>\n\n<style lang=\"stylus\">\n.card-body\n  padding 0.5rem\n.bar\n  height 30px\n  position relative\n  &-grid\n    position absolute\n    top 0\n    right 0\n    bottom 0\n    left 0\n    display flex\n    > div\n      border 1px solid #dedede\n      border-left-width 0\n      flex-grow 1\n      &:first-child\n        border-left-width 1px\n  &-content\n    position absolute\n    top 0\n    right 0\n    bottom 0\n    left 0\n    z-index 2\n  &-rule\n    position absolute\n    top 0\n    bottom 0\n    transition all 0.5s\n    &-inner\n      margin 4px\n      background-color #336699\n      height 22px\n      border-radius 5px\n      color #ffffff\n      text-align center\n      transition all 0.5s\n  &-rule.-preliminary\n    top -10px\n    bottom auto\n    .bar-rule-inner\n      height 4px\n      border-radius 2px\n      opacity 0.5\n  &-rule.-highlighted\n    .bar-rule-inner\n      background-color #33ded6\n\n.slide-enter-active, .slide-leave-active\n  transition all 0.5s\n.slide-enter, .slide-leave-to\n  opacity 0\n  transform translateY(-30px)\n\n.alert\n  transition all 0.5s\n\n.slide-rev-enter-active, .slide-rev-leave-active\n  transition all 0.5s\n.slide-rev-enter, .slide-rev-leave-to\n  opacity 0\n  transform translateY(30px)\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// RulesTest.vue?e3060e5e","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('router-view')}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-189d6973\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = YK0F\n// module chunks = 1","import Vue from 'vue'\nimport Router from 'vue-router'\nimport RulesTest from '@/components/RulesTest'\n\nVue.use(Router)\n\nexport default new Router({\n  mode: 'history',\n  routes: [\n    {\n      path: '/',\n      name: 'RulesTest',\n      component: RulesTest\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-71818264\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./RulesTest.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./RulesTest.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-71818264\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./RulesTest.vue\"\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/RulesTest.vue\n// module id = pW4T\n// module chunks = 1"],"sourceRoot":""}